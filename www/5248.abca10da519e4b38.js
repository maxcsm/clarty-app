"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5248],{5248:(A,u,r)=>{r.r(u),r.d(u,{ChatListPageModule:()=>_});var d=r(177),m=r(9417),o=r(8974),h=r(904),c=r(467),t=r(4438),p=r(4517),f=r(995),v=r(1626),y=r(6432),C=r(9109);function b(n,g){if(1&n&&t.nrm(0,"img",16),2&n){const i=t.XpG().$implicit;t.FS9("src",i.image,t.B4B)}}function F(n,g){if(1&n){const i=t.RV6();t.j41(0,"ion-list")(1,"ion-item",10),t.DNE(2,b,1,1,"img",11),t.j41(3,"ion-label",12),t.bIt("click",function(e){const l=t.eBV(i).$implicit,a=t.XpG();return t.Njj(a.nextFile(e,l))}),t.j41(4,"h2"),t.EFF(5),t.k0s(),t.j41(6,"small"),t.EFF(7),t.nI1(8,"date"),t.nI1(9,"date"),t.k0s(),t.nrm(10,"br"),t.j41(11,"ion-button",13),t.EFF(12),t.k0s(),t.nrm(13,"br"),t.k0s(),t.j41(14,"ion-button",14),t.bIt("click",function(e){const l=t.eBV(i).$implicit,a=t.XpG();return t.Njj(a.delete(e,l))}),t.nrm(15,"ion-icon",15),t.k0s()()()}if(2&n){const i=g.$implicit;t.R7$(2),t.Y8G("ngIf",i.image),t.R7$(3),t.SpI(" ",i.title," "),t.R7$(2),t.Lme("",t.i5U(8,5,i.created_at,"dd-MM-yyyy")," \xe0 ",t.i5U(9,8,i.created_at,"HH:mm"),""),t.R7$(5),t.JRh(i.category)}}function U(n,g){if(1&n){const i=t.RV6();t.j41(0,"ion-content",17),t.EFF(1," Cr\xe9er un nouvel assistant avec tous mes fichiers "),t.j41(2,"ion-button",18),t.bIt("click",function(){t.eBV(i);const e=t.XpG();return t.Njj(e.CreateAssistantThreadByFile())}),t.EFF(3," Oui "),t.k0s()()}}const j=[{path:"",component:(()=>{class n{constructor(i,s,e,l,a,k,I,x,B,P,T,L,S,E){this.navCtrl=i,this.formBuilder=s,this.alertController=e,this.menu=l,this.loadingController=a,this.redditService=k,this.router=I,this.toastCtrl=x,this.loadingCtrl=B,this.modalController=P,this.http=T,this.openaiService=L,this.localStore=S,this.popoverController=E,this.table="locations",this.category="",this.status="",this.filter="",this.wordid="",this.total=0,this.last_page=0,this.per_page=20,this.order_id="id",this.order_by="desc",this.title="",this.UrlImage="",this.page=1}ngOnInit(){}ionViewWillEnter(){this.iduser=this.localStore.getItem("iduser"),this.vectorStoreId=this.localStore.getItem("vectorStoreId"),this.getData()}getData(){var i=this;return(0,c.A)(function*(){const s=yield i.loadingCtrl.create({message:"Chargement..",spinner:"bubbles"});i.redditService.getDataBypageByUser(i.iduser,i.page,"assitantsByUser",i.per_page,i.order_id,i.order_by,i.category,i.status,i.filter).subscribe(e=>{s.dismiss(),console.log(e),i.posts=e.data})})()}nextFile(i,s){var e=this;return(0,c.A)(function*(){console.log(s.id),e.router.navigateByUrl("/chat-doc/"+s.id)})()}delete(i,s){var e=this;return(0,c.A)(function*(){e.idfile=s.id_file,e.idfiledb=s.id,console.log(e.idfiledb);const l=yield e.loadingController.create({});l.present(),e.redditService.delete("assistants",e.idfiledb).toPromise().then(a=>{console.log(a)}),setTimeout(()=>{e.getData(),l.dismiss()},2e3)})()}CreateAssistantThreadByFile(){var i=this;return(0,c.A)(function*(){var s=JSON.stringify({vector_store_id:i.vectorStoreId,title:i.title,userid:i.iduser,category:"Tous les fichiers"});console.log(s),i.closePopover();const e=yield i.loadingController.create({message:"Chargement en cours"});e.present(),i.redditService.addPost("CreateAssistantThreadByFile",s).subscribe(function(){var l=(0,c.A)(function*(a){console.log(a),setTimeout((0,c.A)(function*(){console.log(a.assistant.id),e.dismiss(),"chat"==a.assistant.category?i.router.navigateByUrl("/tabs/chatgpt-openai/"):(yield i.menu.close(),i.router.navigateByUrl("/tabs/chat-doc/"+a.assistant.id))}),1e3)});return function(a){return l.apply(this,arguments)}}())})()}closePopover(){var i=this;return(0,c.A)(function*(){yield i.popoverController.dismiss()})()}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(p.q9),t.rXU(m.ok),t.rXU(o.hG),t.rXU(o._t),t.rXU(o.Xi),t.rXU(f.s),t.rXU(h.Ix),t.rXU(o.K_),t.rXU(o.Xi),t.rXU(o.W3),t.rXU(v.Qq),t.rXU(y.Y),t.rXU(C.n),t.rXU(o.IE))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-chat-list"]],decls:17,vars:1,consts:[["lines","none"],["slot","start"],["color","primary"],["slot","end",1,"fade-in","delay-1",3,"click"],["color","primary","name","add-circle-outline",2,"font-size","30px","right","0px"],[1,"padding"],["sizeLg","3","sizeMd","3","sizeXs","0"],["sizeLg","6","sizeMd","6","sizeXs","12",2,"border","2px","border-width","2px","text-align","center"],[4,"ngFor","ngForOf"],["trigger","click-trigger","triggerAction","click"],["button","",1,"text-wrap"],["style","height:50px; padding-bottom: 4px;","slot","start",3,"src",4,"ngIf"],[3,"click"],["size","small","fill","outline"],["ion-button","","outline","","item-end","","small","","color","light",3,"click"],["name","trash-outline"],["slot","start",2,"height","50px","padding-bottom","4px",3,"src"],[1,"ion-padding"],["fill","solid","triggerAction","click",3,"click"]],template:function(s,e){1&s&&(t.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t.nrm(3,"ion-menu-button",2),t.k0s(),t.j41(4,"ion-buttons",3),t.bIt("click",function(){return e.CreateAssistantThreadByFile()}),t.j41(5,"h4"),t.EFF(6," Cr\xe9er un nouvelle discussion "),t.k0s(),t.nrm(7,"ion-icon",4),t.k0s()()(),t.j41(8,"ion-content")(9,"ion-grid")(10,"ion-row",5),t.nrm(11,"ion-col",6),t.j41(12,"ion-col",7),t.DNE(13,F,16,11,"ion-list",8),t.k0s(),t.nrm(14,"ion-col",6),t.k0s()()(),t.j41(15,"ion-popover",9),t.DNE(16,U,4,0,"ng-template"),t.k0s()),2&s&&(t.R7$(13),t.Y8G("ngForOf",e.posts))},dependencies:[d.Sq,d.bT,o.Jm,o.QW,o.hU,o.W9,o.lO,o.eU,o.iq,o.uz,o.he,o.nf,o.MC,o.ln,o.ai,o.CF,d.vh]})}}return n})()}];let X=(()=>{class n{static{this.\u0275fac=function(s){return new(s||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[h.iI.forChild(j),h.iI]})}}return n})(),_=(()=>{class n{static{this.\u0275fac=function(s){return new(s||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[d.MD,m.YN,o.bv,X]})}}return n})()}}]);